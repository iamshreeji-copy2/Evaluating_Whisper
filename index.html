<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Compact vocoder research demo page" />
  <title>LaghuVani</title>
  <style>
    :root {
      --bg: #ffffff;
      --fg: #222222;
      --accent: #2563eb;
      --muted: #666666;
      --card: #f5f5f5;
    }

    [data-theme="dark"] {
      --bg: #0f172a;
      --fg: #e2e8f0;
      --accent: #3b82f6;
      --muted: #94a3b8;
      --card: #1e293b;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: var(--bg);
      color: var(--fg);
      scroll-behavior: smooth;
    }

    a {
      color: var(--accent);
    }

    header {
      padding: 2rem 1.25rem 1rem;
      max-width: 960px;
      margin: 0 auto;
    }

    nav {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      margin-bottom: 1.5rem;
    }

    nav a {
      text-decoration: none;
      font-size: 0.95rem;
      color: var(--muted);
    }

    nav a:hover {
      color: var(--accent);
    }

    .hero {
      padding: 3rem 1.25rem 2rem;
      text-align: center;
      background: var(--card);
    }

    .hero h1 {
      margin: 0 0 0.75rem;
      font-size: clamp(1.8rem, 5vw, 2.6rem);
    }

    .hero p {
      margin: 0.25rem 0;
      color: var(--muted);
    }

    main {
      max-width: 960px;
      margin: 0 auto;
      padding: 2rem 1.25rem 4rem;
    }

    section {
      margin-bottom: 3.5rem;
    }

    h2 {
      margin: 0 0 1rem;
      font-size: 1.5rem;
    }

    h3 {
      margin: 1.5rem 0 0.5rem;
      font-size: 1.15rem;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      margin-top: 1rem;
    }

    th,
    td {
      padding: 0.5rem 0.6rem;
      border-bottom: 1px solid var(--muted);
      text-align: left;
    }

    th {
      background: var(--card);
    }

    .theme-toggle {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      background: var(--card);
      color: var(--fg);
      border: none;
      border-radius: 999px;
      padding: 0.6rem 0.9rem;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      font-size: 0.85rem;
    }

    .chart-controls {
      margin-bottom: 1rem;
    }

    .chart-controls label {
      margin-right: 1.5rem;
    }

    /* === Audio rows === */
    .audio-row {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin: 0.35rem 0;
    }

    .audio-label {
      width: 130px;
      font-size: 0.9rem;
      color: var(--muted);
      text-align: right;
    }

    /* === Twoâ€‘column male/female layout === */
    .audio-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.2rem 2rem;
      align-items: flex-start;
    }

    .audio-col-title {
      margin: 0 0 .6rem;
      text-align: center;
      font-size: 1rem;
      color: var(--muted);
    }

    @media (max-width: 768px) {
      .audio-grid {
        grid-template-columns: 1fr;
      }

      .audio-label {
        text-align: left;
        width: 100px;
      }
    }

    footer {
      font-size: 0.8rem;
      text-align: center;
      padding: 2rem 1rem;
      color: var(--muted);
    }
  </style>
</head>

<body>
  <button class="theme-toggle" onclick="toggleTheme()">ðŸŒ“</button>

  <header>
    <nav>
      <a href="#about">About</a>
      <a href="#models">Models</a>
      <a href="#demos">Audio Demos</a>
      <a href="#metrics">Metrics</a>
      <a href="#graphs">Graphs</a>
      <a href="#contact">Contact</a>
    </nav>
  </header>

  <div class="hero">
    <h1>LaghuVani</h1>
    <p>Balancing Compactness and Quality in Indic Language Vocoding because Less is Sometimes More!</p>
  </div>

  <main>
    <section id="about">
      <h2>About</h2>
      <p>LaghuVani is a family of five ultra-compact neural vocoders (6M, 1M, 0.5M, 0.1M, 0.02M) created by
        systematically scaling BigVGAN down from 112M parameters to just 0.02M. The goal is to make high-quality speech
        synthesis feasible for underrepresented Indic languages such as Maithili and Bengali on constrained hardware.
      </p>
      <p>With longer training, these tiny models still retain much of the intelligibility and perceived quality. The 6M
        variant (V1) provides the best sizeâ€“quality trade-off (STOI around 0.90 with NISQA above 3), while the 0.02M
        model showcases the extreme compression limit.</p>
      <p>Evaluation spans two subjective metrics (MOS, NISQA) and seven objective ones (PESQ, STOI, SNR, MCD, FAD, MSD,
        PCC). We release configs, checkpoints and audio samples to enable transparent, reproducible comparison.</p>
    </section>

    <section id="models">
      <h2>Models</h2>
      <p>Five downscaled variants (V1â€“V5) plus a reference BigVGAN baseline:</p>
      <table>
        <thead>
          <tr>
            <th>Model</th>
            <th>Params (M)</th>
            <th>Config</th>
            <th>Checkpoint (Maithili)</th>
            <th>Checkpoint (Bengali)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>BigVGAN-Ref</td>
            <td>112</td>
            <td><a href="assets/configs/bigvgan_22khz_80band.json">JSON</a></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td>V1</td>
            <td>6.0</td>
            <td><a href="assets/configs/config_6M.json">JSON</a></td>
            <td><a href="assets/ckpts/checkpoint_mai_6M.pt" download>Download</a></td>
            <td><a href="assets/ckpts/checkpoint_ben_6M.pt" download>Download</a></td>
          </tr>
          <tr>
            <td>V2</td>
            <td>1.0</td>
            <td><a href="assets/configs/config_1M.json">JSON</a></td>
            <td><a href="assets/ckpts/checkpoint_mai_1M.pt" download>Download</a></td>
            <td><a href="assets/ckpts/checkpoint_ben_1M.pt" download>Download</a></td>
          </tr>
          <tr>
            <td>V3</td>
            <td>0.5</td>
            <td><a href="assets/configs/config_0_5M.json">JSON</a></td>
            <td><a href="assets/ckpts/checkpoint_mai_0_5M.pt" download>Download</a></td>
            <td><a href="assets/ckpts/checkpoint_ben_0_5M.pt" download>Download</a></td>
          </tr>
          <tr>
            <td>V4</td>
            <td>0.1</td>
            <td><a href="assets/configs/config_0_1M.json">JSON</a></td>
            <td><a href="assets/ckpts/checkpoint_mai_0_1M.pt" download>Download</a></td>
            <td><a href="assets/ckpts/checkpoint_ben_0_1M.pt" download>Download</a></td>
          </tr>
          <tr>
            <td>V5</td>
            <td>0.02</td>
            <td><a href="assets/configs/config_0_02M.json">JSON</a></td>
            <td><a href="assets/ckpts/checkpoint_ben_0_02M.pt" download>Download</a></td>
            <td><a href="assets/ckpts/checkpoint_mai_0_02M.pt" download>Download</a></td>
          </tr>
        </tbody>
      </table>
    </section>

    <section id="demos">
      <h2>Audio Demos</h2>
      <p>Ground truth (GT) + baseline + proposed variants.</p>

      <!-- ================= Maithili ================= -->
      <h3>Maithili</h3>
      <div class="audio-grid">
        <!-- Male column -->
        <div class="audio-col male">
          <h4 class="audio-col-title">Male</h4>
          <div class="audio-row"><span class="audio-label">GT</span>
            <audio controls preload="none" src="assets/audio/mai_m_TECH_01026.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">BigVGAN-Ref</span>
            <audio controls preload="none" src="assets/audio/mai_m_TECH_01026_Big.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V1 (6M)</span>
            <audio controls preload="none" src="assets/audio/mai_m_TECH_01026_6M.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V2 (1M)</span>
            <audio controls preload="none" src="assets/audio/mai_m_TECH_01026_1M.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V3 (0.5M)</span>
            <audio controls preload="none" src="assets/audio/mai_m_TECH_01026_0_5M.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V4 (0.1M)</span>
            <audio controls preload="none" src="assets/audio/mai_m_TECH_01026_0_1M.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V5 (0.02M)</span>
            <audio controls preload="none" src="assets/audio/mai_m_TECH_01026_0_02M.wav"></audio>
          </div>
        </div>

        <!-- Female column -->
        <div class="audio-col female">
          <h4 class="audio-col-title">Female</h4>
          <div class="audio-row"><span class="audio-label">GT</span>
            <audio controls preload="none" src="assets/audio/mai_f_AGRI_00033.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">BigVGAN-Ref</span>
            <audio controls preload="none" src="assets/audio/mai_f_AGRI_00033_Big.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V1 (6M)</span>
            <audio controls preload="none" src="assets/audio/mai_f_AGRI_00033_6M.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V2 (1M)</span>
            <audio controls preload="none" src="assets/audio/mai_f_AGRI_00033_1M.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V3 (0.5M)</span>
            <audio controls preload="none" src="assets/audio/mai_f_AGRI_00033_0_5M.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V4 (0.1M)</span>
            <audio controls preload="none" src="assets/audio/mai_f_AGRI_00033_0_1M.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V5 (0.02M)</span>
            <audio controls preload="none" src="assets/audio/mai_f_AGRI_00033_0_02M.wav"></audio>
          </div>
        </div>
      </div>

      <!-- ================= Bengali ================= -->
      <h3>Bengali</h3>
      <div class="audio-grid">
        <!-- Male column -->
        <div class="audio-col male">
          <h4 class="audio-col-title">Male</h4>
          <div class="audio-row"><span class="audio-label">GT</span>
            <audio controls preload="none" src="assets/audio/bn_m_WEAT_01528.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">BigVGAN-Ref</span>
            <audio controls preload="none" src="assets/audio/bn_m_WEAT_01528_Big.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V1 (6M)</span>
            <audio controls preload="none" src="assets/audio/bn_m_WEAT_01528_6M.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V2 (1M)</span>
            <audio controls preload="none" src="assets/audio/bn_m_WEAT_01528_1M.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V3 (0.5M)</span>
            <audio controls preload="none" src="assets/audio/bn_m_WEAT_01528_0_5M.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V4 (0.1M)</span>
            <audio controls preload="none" src="assets/audio/bn_m_WEAT_01528_0_1M.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V5 (0.02M)</span>
            <audio controls preload="none" src="assets/audio/bn_m_WEAT_01528_0_02M.wav"></audio>
          </div>
        </div>

        <!-- Female column -->
        <div class="audio-col female">
          <h4 class="audio-col-title">Female</h4>
          <div class="audio-row"><span class="audio-label">GT</span>
            <audio controls preload="none" src="assets/audio/bn_f_AGRI_00180.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">BigVGAN-Ref</span>
            <audio controls preload="none" src="assets/audio/bn_f_AGRI_00180_Big.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V1 (6M)</span>
            <audio controls preload="none" src="assets/audio/bn_f_AGRI_00180_6M.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V2 (1M)</span>
            <audio controls preload="none" src="assets/audio/bn_f_AGRI_00180_1M.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V3 (0.5M)</span>
            <audio controls preload="none" src="assets/audio/bn_f_AGRI_00180_0_5M.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V4 (0.1M)</span>
            <audio controls preload="none" src="assets/audio/bn_f_AGRI_00180_0_1M.wav"></audio>
          </div>
          <div class="audio-row"><span class="audio-label">V5 (0.02M)</span>
            <audio controls preload="none" src="assets/audio/bn_f_AGRI_00180_0_02M.wav"></audio>
          </div>
        </div>
      </div>
    </section>

    <!-- Dynamic Metrics Table (with Â±â€¯std) -->
    <section id="metrics">
      <h2>Metrics Snapshot</h2>
      <p>Objective metrics (â†‘ higher is better, â†“ lower is better). MOS is from listening tests.</p>
    </section>

    <script>
      const metricsOrder = ['MOS', 'NISQA', 'PESQ', 'STOI', 'SNR', 'MCD', 'FAD', 'PCC', 'MSD'];

      function buildTable(lang, data) {
        const tbl = document.createElement('table');
        tbl.innerHTML = `
      <caption><h3>${lang}</h3></caption>
      <thead>
        <tr>
          <th>Model</th>
          ${metricsOrder.map(m => `<th>${m}&nbsp;â†‘</th>`).join('')}
        </tr>
      </thead>
      <tbody>
        ${Array.from(new Set(
          metricsOrder.flatMap(metric =>
            data[lang][metric].map(d => d.model)
          )
        )).map(model => {
          return `<tr>
              <td>${model}</td>
              ${metricsOrder.map(metric => {
            const found = data[lang][metric].find(d => d.model === model);
            if (!found) return `<td>â€”</td>`;
            // round to 3 decimal places
            const mean = found.value.toFixed(3);
            const std = (found.std != null)
              ? ` Â± ${found.std.toFixed(3)}`
              : '';
            return `<td>${mean}${std}</td>`;
          }).join('')}
            </tr>`;
        }).join('')}
      </tbody>`;
        return tbl;
      }

      fetch('assets/data/metrics.json')
        .then(r => r.json())
        .then(data => {
          const sec = document.getElementById('metrics');
          sec.querySelectorAll('table').forEach(t => t.remove());
          ['Maithili', 'Bengali'].forEach(lang =>
            sec.appendChild(buildTable(lang, data))
          );
        })
        .catch(console.error);
    </script>


    <!-- Interactive Plotly Graph -->
    <section id="graphs">
      <h2>Interactive Metrics</h2>

      <div class="chart-controls">
        <label>
          Language:
          <select id="lang-select">
            <option>Both</option>
            <option>Maithili</option>
            <option>Bengali</option>
          </select>
        </label>
        <label>
          Metric:
          <select id="metric-select"></select>
        </label>
      </div>

      <div id="metrics-chart" style="height:400px;"></div>
    </section>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
      let globalData;
      const metrics = ['MOS', 'NISQA', 'PESQ', 'STOI', 'SNR', 'MCD', 'FAD', 'PCC', 'MSD'];

      // after JSON loads, populate the Metric <select> & draw
      fetch('assets/data/metrics.json')
        .then(r => r.json())
        .then(dataStore => {
          globalData = dataStore;
          const msel = document.getElementById('metric-select');

          // helper to rebuild metric-options based on language
          function rebuildMetricsOptions(langVal) {
            msel.innerHTML = '';
            if (langVal !== 'Both') {
              msel.add(new Option('All'));
            }
            metrics.forEach(m => msel.add(new Option(m)));
          }

          // initial build
          rebuildMetricsOptions('Both');

          // wire up both selects
          document.getElementById('lang-select').onchange = function () {
            rebuildMetricsOptions(this.value);
            updateChart();
          };
          msel.onchange = updateChart;

          // initial chart draw
          updateChart();
        })
        .catch(console.error);

      function updateChart() {
        const langVal = document.getElementById('lang-select').value;
        const metricVal = document.getElementById('metric-select').value;

        // choose which languages to plot
        const langs = (langVal === 'Both') ? ['Maithili', 'Bengali'] : [langVal];

        let traces, layout;
        if (metricVal === 'All') {
          // one trace per metric (single language only)
          traces = metrics.map(metric => {
            const arr = globalData[langs[0]][metric];
            return {
              x: arr.map(d => d.model),
              y: arr.map(d => d.value),
              error_y: {
                type: 'data',
                array: arr.map(d => d.std),
                visible: true
              },
              name: metric,
              type: 'bar'
            };
          });
          layout = {
            barmode: 'group',
            title: { text: `${langs[0]} â€“ All Metrics`, x: 0.5 },
            xaxis: { title: 'Model' }
          };
        } else {
          // one trace per language for a single metric
          traces = langs.map(lang => {
            const arr = globalData[lang][metricVal];
            return {
              x: arr.map(d => d.model),
              y: arr.map(d => d.value),
              error_y: {
                type: 'data',
                array: arr.map(d => d.std),
                visible: true
              },
              name: lang,
              type: 'bar'
            };
          });

          // subtitle with â†‘/â†“ as before
          const lowerIsBetter = ['MCD', 'FAD', 'MSD'];
          const icon = lowerIsBetter.includes(metricVal) ? 'â†“' : 'â†‘';
          const verb = lowerIsBetter.includes(metricVal)
            ? 'lower is better'
            : 'higher is better';

          layout = {
            barmode: 'group',
            title: {
              text: `${langVal} â€“ ${metricVal}<br>` +
                `<span style="font-size:.8em; color:var(--muted)">` +
                `${icon}Â ${verb}` +
                `</span>`,
              x: 0.5
            },
            xaxis: { title: 'Model' }
          };
        }

        // choose log vs linear
        const allYs = traces.flatMap(t => t.y);
        const maxY = Math.max(...allYs, 0);
        layout.yaxis = {
          title: metricVal === 'All' ? 'Value' : metricVal,
          type: maxY > 10 ? 'log' : 'linear'
        };

        Plotly.react('metrics-chart', traces, layout);
      }

      // theme toggle
      function toggleTheme() {
        const root = document.documentElement;
        const next = root.getAttribute('data-theme') === 'dark' ? '' : 'dark';
        if (next) root.setAttribute('data-theme', next);
        else root.removeAttribute('data-theme');
        localStorage.setItem('theme', next);
      }
      (function () {
        if (localStorage.getItem('theme') === 'dark')
          document.documentElement.setAttribute('data-theme', 'dark');
      })();
    </script>

    <section id="contact">
      <h2>Contact</h2>
      <p>For questions, email the maintainer at <code>202418024@dau.ac.in</code></p>
    </section>
  </main>

  <footer>
    <p>Â© <span id="year"></span> LaghuVani / Speech Lab. This page is served via GitHub Pages.</p>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>

</html>